@startuml

' Définition des tables

entity "user" as User {
  + **user_id (PK)** : int
  --
  * mail : varchar(255) [UNIQUE]
  * password : varchar(255)
  name : varchar(100)
  firstname : varchar(100)
}

entity "series" as Series {
  + **series_id (PK)** : int
  --
  title : varchar(128)
  description : text
  img : varchar(256)
  year : int
  date_added : date
  --
  # type_id (FK) : int
}

entity "episode" as Episode {
  + **episode_id (PK)** : int
  --
  num : int
  title : varchar(128)
  summary : text
  duration : int
  file : varchar(256)
  img : varchar(256)
  --
  # **series_id (FK)** : int
}

entity "type" as Type {
  + **type_id (PK)** : int
  --
  * name : varchar(100) [UNIQUE]
}

' Tables d'association

entity "commentary" as Commentary {
  + **user_id (PK, FK)** : int
  + **series_id (PK, FK)** : int
  --
  text : text
  date_added : datetime
}

entity "notation" as Notation {
  + **user_id (PK, FK)** : int
  + **series_id (PK, FK)** : int
  --
  note : tinyint(1)
  date_added : datetime
}

entity "episode2series" as Episode2Series {
  + **episode_id (PK, FK)** : int
  + **series_id (PK, FK)** : int
}

entity "Like_list" as LikeList {
  + **user_id (PK, FK)** : int
  + **series_id (PK, FK)** : int
}

entity "watch_episode" as WatchEpisode {
  + **user_id (PK, FK)** : int
  + **episode_id (PK, FK)** : int
  --
  viewing_date : datetime
}


' Définition des relations
Type -- Series : "concerne 0..N"


' Tables de liaison
User -- Commentary : "écrit 0..N"
Series -- Commentary : "reçoit 0..N"

User -- Notation : "écrit 0..N"
Series -- Notation : "reçoit 0..N"

User -- LikeList : "préfère 0..N"
Series -- LikeList : "est préféré par 0..N"

User -- WatchEpisode : "visionne 0..N"
Episode -- WatchEpisode : "est visionné par 0..N"

Series -- Episode2Series : "contient 0..N"
Episode -- Episode2Series : "est dans 0..N"

@enduml